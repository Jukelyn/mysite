<!DOCTYPE html>
<html lang="en">

<head>
  <title>
  How To Setup Nginx Proxy Manager Using Portainer (Docker)  · Jukelyn
</title>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="color-scheme" content="light dark">




<meta name="description" content="How to use nginx proxy manager to reverse proxy.">
<meta name="keywords" content="blog,developer,personal">

<meta name="twitter:card" content="summary"/><meta name="twitter:title" content="How To Setup Nginx Proxy Manager Using Portainer (Docker) "/>
<meta name="twitter:description" content="How to use nginx proxy manager to reverse proxy."/>

<meta property="og:title" content="How To Setup Nginx Proxy Manager Using Portainer (Docker) " />
<meta property="og:description" content="How to use nginx proxy manager to reverse proxy." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://jukelyn.com/posts/npm/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2024-09-07T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-09-07T00:00:00+00:00" />





<link rel="canonical" href="http://jukelyn.com/posts/npm/">


<link rel="preload" href="/fonts/fa-brands-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-regular-400.woff2" as="font" type="font/woff2" crossorigin>
<link rel="preload" href="/fonts/fa-solid-900.woff2" as="font" type="font/woff2" crossorigin>


  
  
  <link rel="stylesheet" href="/css/coder.min.577e3c5ead537873430da16f0964b754a120fd87c4e2203a00686e7c75b51378.css" integrity="sha256-V348Xq1TeHNDDaFvCWS3VKEg/YfE4iA6AGhufHW1E3g=" crossorigin="anonymous" media="screen" />






  
    
    
    <link rel="stylesheet" href="/css/coder-dark.min.a00e6364bacbc8266ad1cc81230774a1397198f8cfb7bcba29b7d6fcb54ce57f.css" integrity="sha256-oA5jZLrLyCZq0cyBIwd0oTlxmPjPt7y6KbfW/LVM5X8=" crossorigin="anonymous" media="screen" />
  



 




<link rel="icon" type="image/svg+xml" href="/images/favicon.svg" sizes="any">
<link rel="icon" type="image/png" href="/images/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/images/favicon-16x16.png" sizes="16x16">

<link rel="apple-touch-icon" href="/images/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">

<link rel="manifest" href="/site.webmanifest">
<link rel="mask-icon" href="/images/safari-pinned-tab.svg" color="#5bbad5">









</head>






<body class="preload-transitions colorscheme-dark">
  

  <main class="wrapper">
    <nav class="navigation">
  <section class="container">
    
    <a class="navigation-title" href="http://jukelyn.com/">
      Jukelyn
    </a>
    
    
      <input type="checkbox" id="menu-toggle" />
      <label class="menu-button float-right" for="menu-toggle">
        <i class="fa-solid fa-bars fa-fw" aria-hidden="true"></i>
      </label>
      <ul class="navigation-list">
        
          
            <li class="navigation-item">
              <a class="navigation-link " href="/about/">About me</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/posts/">Blog Posts</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/projects/">Projects</a>
            </li>
          
            <li class="navigation-item">
              <a class="navigation-link " href="/contact/">Contact Me</a>
            </li>
          
        
        
      </ul>
    
  </section>
</nav>


    <div class="content">
      
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">
            <a class="title-link" href="http://jukelyn.com/posts/npm/">
              How To Setup Nginx Proxy Manager Using Portainer (Docker) 
            </a>
          </h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fa-solid fa-calendar" aria-hidden="true"></i>
              <time datetime="2024-09-07T00:00:00Z">
                September 7, 2024
              </time>
            </span>
            <span class="reading-time">
              <i class="fa-solid fa-clock" aria-hidden="true"></i>
              5-minute read
            </span>
          </div>
          
          <div class="categories">
  <i class="fa-solid fa-folder" aria-hidden="true"></i>
    <a href="/categories/nginx/">Nginx</a>
      <span class="separator">•</span>
    <a href="/categories/reverse-proxy/">Reverse Proxy</a>
      <span class="separator">•</span>
    <a href="/categories/website/">Website</a></div>

          
        </div>
      </header>

      <div class="post-content">
        
        <p><a href="#updates" >Jump to Updates</a></p>
<h3 id="what-is-nginx-proxy-manager">
  What is Nginx Proxy Manager?
  <a class="heading-link" href="#what-is-nginx-proxy-manager">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Nginx Proxy Manager (NPM) is a web-based, easy-to-use tool that simplifies the management of Nginx reverse proxies. It allows users to manage their reverse proxies, SSL certificates, and forwarding rules with a graphical user interface (GUI), making it much easier for beginners or non-experts to set up and manage web servers. Here&rsquo;s an overview of what Nginx Proxy Manager offers:</p>
<ol>
<li>
<p>Reverse Proxy Setup</p>
<ul>
<li>Nginx Proxy Manager helps you configure Nginx as a reverse proxy to forward web traffic from one domain or port to another service running behind it. This is especially useful for routing requests to different services (like websites, applications, or APIs) hosted on the same server.</li>
</ul>
</li>
<li>
<p>SSL Management</p>
<ul>
<li>It makes obtaining and managing SSL certificates (e.g., from Let&rsquo;s Encrypt) straightforward. You can easily enable HTTPS for your domains, ensuring secure communication between clients and your services.</li>
</ul>
</li>
<li>
<p>User-Friendly Interface</p>
<ul>
<li>The web-based GUI simplifies many tasks that would normally require manual editing of Nginx configuration files. This is particularly useful for people who aren&rsquo;t comfortable working directly with terminal commands or config files.</li>
</ul>
</li>
<li>
<p>Access Control</p>
<ul>
<li>NPM allows you to set up basic authentication to protect your web services behind login credentials, adding a layer of security to your applications.</li>
</ul>
</li>
<li>
<p>Custom Domain Support</p>
<ul>
<li>You can easily route traffic based on domain names. For example, you can have <code>app1.yourdomain.com</code> go to one server and <code>app2.yourdomain.com</code> go to another.</li>
</ul>
</li>
<li>
<p>Multiple Protocols</p>
<ul>
<li>Besides HTTP and HTTPS, Nginx Proxy Manager can also handle WebSocket connections and manage TCP/UDP proxying.</li>
</ul>
</li>
<li>
<p>Logs and Monitoring</p>
<ul>
<li>It provides access to logs, making it easier to monitor traffic, troubleshoot issues, and see where requests are being routed.</li>
</ul>
</li>
</ol>
<h3 id="typical-use-cases">
  Typical Use Cases
  <a class="heading-link" href="#typical-use-cases">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<ol>
<li>
<p>Self-hosted Applications: If you&rsquo;re hosting multiple services (e.g., web apps, Docker containers, APIs) on the same server, Nginx Proxy Manager helps to route traffic to the correct service based on the domain or subdomain.</p>
</li>
<li>
<p>SSL/TLS Management: For anyone running public-facing websites, Nginx Proxy Manager automates SSL certificate generation and renewal via Let&rsquo;s Encrypt.</p>
</li>
<li>
<p>Securing Web Services: You can quickly configure secure reverse proxies for services running behind firewalls, like private applications or administrative panels.</p>
</li>
</ol>
<p>I am going to use NPM to replace my current reverse proxy, Traefik. Doing this is pretty simple, first we need to deploy NPM in a docker container and let it have access to the same Docker networks that I have.</p>
<div class="highlight"><pre tabindex="0" style="color:#e6edf3;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-yaml" data-lang="yaml"><span style="display:flex;"><span><span style="color:#7ee787">services</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">  </span><span style="color:#7ee787">npm</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">container_name</span>:<span style="color:#6e7681"> </span><span style="color:#a5d6ff">npm</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">image</span>:<span style="color:#6e7681"> </span><span style="color:#a5d6ff">jc21/nginx-proxy-manager:latest</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">restart</span>:<span style="color:#6e7681"> </span><span style="color:#a5d6ff">unless-stopped</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">ports</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">80</span>:<span style="color:#a5d6ff">80</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">443</span>:<span style="color:#a5d6ff">443</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">81</span>:<span style="color:#a5d6ff">81</span><span style="color:#6e7681"> </span><span style="color:#8b949e;font-style:italic"># Admin Web Port</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">environment</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span><span style="color:#7ee787">DISABLE_IPV6</span>:<span style="color:#6e7681"> </span><span style="color:#79c0ff">true</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">volumes</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">./data/npm/data:/data</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">./data/letsencrypt:/etc/letsencrypt</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">networks</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">default</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">vault</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">sites</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">kuma_net</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span>- <span style="color:#a5d6ff">immich</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">    </span><span style="color:#7ee787">healthcheck</span>:<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span><span style="color:#7ee787">test</span>:<span style="color:#6e7681"> </span>[<span style="color:#a5d6ff">&#34;CMD&#34;</span>,<span style="color:#6e7681"> </span><span style="color:#a5d6ff">&#34;/usr/bin/check-health&#34;</span>]<span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span><span style="color:#7ee787">interval</span>:<span style="color:#6e7681"> </span><span style="color:#a5d6ff">10s</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681">      </span><span style="color:#7ee787">timeout</span>:<span style="color:#6e7681"> </span><span style="color:#a5d6ff">3s</span><span style="color:#6e7681">
</span></span></span><span style="display:flex;"><span><span style="color:#6e7681"></span><span style="color:#ff7b72">...</span><span style="color:#6e7681">
</span></span></span></code></pre></div><p>This is pretty simple to understand but the key parts are the ports where we have 80 for HTTP, 443 for HTTPS, and 81 for the admin web UI. The networks that I have listed are the networks that I have various services running on that I have to have subdomains pointing to those services. Once I deploy this, I can navigate to my local ip on that port to access the admin web UI, so <code>http://192.168.1.87:81</code>.</p>
<h3 id="initial-setup">
  Initial Setup
  <a class="heading-link" href="#initial-setup">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Once you navigate to the admin web UI for the first time you will be met with the login page, the default credentials are:</p>
<pre tabindex="0"><code>email:    admin@example.com
Password: changeme
</code></pre><p>Immediately after logging in with this default user you will be asked to modify your details and change your password.</p>
<h3 id="setting-up-services">
  Setting up services
  <a class="heading-link" href="#setting-up-services">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Setting up services in NPM is really simple. I will showing you how to setup a subdomain for NPM itself on my domain <code>jukelyn.com</code>.</p>
<p>Navigate to &ldquo;Hosts&rdquo; on the top bar and click on &ldquo;Add Proxy Host&rdquo;. The domain name will be <code>npm.jukelyn.com</code> with the scheme <code>http</code>, with the <code>Forward Hostname / IP</code> being <code>npm</code>. This hostname is the name of the docker container that NPM is running on, I named mine &ldquo;npm&rdquo;, thus I will enter &ldquo;npm&rdquo;, change this as needed. The port will be set to port 81 since that is the port of the NPM admin web UI.</p>
<p>By default, the &ldquo;Access List&rdquo; is set to &ldquo;Publicly Accessible&rdquo;. This is fine for now as we will address this next. For the SSL tab, I will enter &ldquo;Request a new SSL Certificate&rdquo; and then enable Force SSL, HTTP/2 Support, and HSTS.</p>
<p>Now go to the &ldquo;Access Lists&rdquo; tab in NPM, create a new access list and name it something meaningful, mine is going to be named &ldquo;Internal&rdquo;. In the &ldquo;Access&rdquo; tab, I will then set it up so that it has <code>allow</code> for all my local traffic which, for me, is <code>192.168.1.0/24</code>. Save and exit.</p>
<p>Now change the NPM proxy host <code>npm.jukelyn.com</code> to use this Access List instead of the default public one. I am now able to enter <code>npm.jukelyn.com</code> to go to the NPM admin web UI.</p>
<p>You can set up other services similarly using the hostname, if on the same docker network (as I have it set up), or IP.</p>
<h3 id="updates">
  Updates
  <a class="heading-link" href="#updates">
    <i class="fa-solid fa-link" aria-hidden="true" title="Link to heading"></i>
    <span class="sr-only">Link to heading</span>
  </a>
</h3>
<p>Any updates being made will be below. Here is a table with jumps to various dates with a short description of changes made:</p>
<blockquote>
<p>Date: Short description</p>
<p>TBD: TBA</p>
</blockquote>

      </div>

      <footer>
        


        
        
        
        
        

        
      </footer>
    </article>

    
  </section>

    </div>

    <footer class="footer">
  <section class="container">
    ©
    
      2023 -
    
    2025
    
    ·
    
    Powered by <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> & <a href="https://github.com/luizdepra/hugo-coder/" target="_blank" rel="noopener">Coder</a>.
    
  </section>
</footer>

  </main>

  

  
  
  <script src="/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js" integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
  

  

  


  

  

  

  

  

  

  

  

  

  

  

  

  

  

  
</body>

</html>
